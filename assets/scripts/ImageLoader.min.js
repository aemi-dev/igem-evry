class ImageLoader{constructor(){this.worker=new ExtendedWorker(()=>{async function a(a,e){console.log(a);const o=await fetch(a),s=await o.blob();return[e,s]}self.onmessage=(async e=>{console.log(e),a(e.data.data.url,e.data.id).then(a=>self.postMessage({id:a[0],data:{blob:a[1]}}))})},{promise:!0})}async load(a){return await this.worker.postMessage({url:window.location.href+a})}}window.AsyncImageLoader=new ImageLoader;